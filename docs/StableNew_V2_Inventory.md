# StableNew V2 Inventory

Generated by `tools/v2_classify_and_archive.py`.  
Detailed JSON output is available at `inventory/stable_v2_inventory.json`.

## Summary Snapshot

| Category | File Count | Notable Roots |
|---|---|---|
| V2 | 595 | `src/gui_v2/`, `src/gui/stage_cards_v2/`, `src/controller/app_controller.py`, `src/app_factory.py`, `src/gui/main_window_v2.py`, `tests/gui_v2/` |
| Shared | 441 | `src/utils/`, `src/pipeline/`, `src/learning/`, `src/queue/`, `logs/`, `tools/` |
| V1 | 122 | Legacy `src/gui/` modules, `src/gui/views/` (non `_v2`), archived tests under `archive/tests_v1/` |
| Unknown | 5,312 | Misc helper scripts, temporary files, caches, docs outside the known pipelines |

## V2 Subsystems (Highlights)

- **GUI v2 shell**  
  Files under `src/gui_v2/`, `src/gui/panels_v2/`, `src/gui/stage_cards_v2/`, `src/gui/layout_v2.py`, and `src/gui/main_window_v2.py` drive the Tk-based stage-card experience. They import controller hooks from `src/controller/app_controller.py` and surface the preview/queue/history panels.  
- **Controller pipeline surface**  
  `AppController`, `LayoutManagerV2`, and their helpers form the V2 spine; they coordinate playlist state, job queue/pipeline runner, learning hooks, and WebUI lifecycle.  
- **Pipeline & randomizer core**  
  The runner (`src/pipeline/pipeline_runner.py`), sequencer, randomizer engine, and adapter modules live under `src/randomizer/` and `src/pipeline/`, ensuring the stage plan/learning records can use the same config invariants.  
- **Tests**  
  V2-focused tests (`tests/gui_v2/`, `tests/controller/`, `tests/pipeline/`, `tests/randomizer/`, `tests/learning/`) make up the majority of the V2 count; they reference the new `AppController` APIs, stage cards, and resource helpers.

## Shared Utilities

Shared modules such as `src/utils/`, `src/queue/`, `src/api/`, and `src/services/` are reused by both V1 and V2 flows. They include the job queue, WebUI process manager, config manager, and helper scripts (`tools/`, `logs/`). These remain untouched by the classifier but are explicitly tracked to avoid accidental archiving.

## Legacy / V1 Candidates

The list of 122 V1 files includes legacy GUI code in `src/gui/` without `_v2` suffixes, older stage cards, and archived `tests/v1/` directories. Run the classifier with `--archive` when these files are confirmed unused. The command moves them into `archive/` while preserving relative paths.
> **Note:** `txt2img_stage_card.py`, `img2img_stage_card.py`, and `upscale_stage_card.py` now live in `archive/gui_stage_cards_v1/` as V1 prototypes; the V2 stage cards under `src/gui/stage_cards_v2/` are the only active components.

## Unknown Files

Unknown entries (5k+) mostly cover temporary builds, cache files (`.mypy_cache/`, `.pyc`), docs outside the tracked V2 sections, and scripts under `tmp/`. Review the JSON output for manual labeling if any production code is miscategorized.

---

To regenerate or re-archive, run:

```
python tools/v2_classify_and_archive.py --json inventory/stable_v2_inventory.json --markdown docs/StableNew_V2_Inventory.md
```

Add `--archive`/`--dry-run`/`--force` to move the V1 subset into `archive/`.
